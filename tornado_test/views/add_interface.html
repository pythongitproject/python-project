{%extends 'common.html' %}
{% block header %}
    <style>
        pre {outline: 1px solid #ccc; padding: 5px; margin: 5px; }
        .string { color: green; }
        .number { color: darkorange; }
        .boolean { color: blue; }
        .null { color: magenta; }
        .key { color: red; }
    </style>
{% end %}
{%block content%}
    <div class="tpl-content-wrapper" style="margin-left: 0.7%">

        <div class="tpl-portlet-components">

            <div class="portlet-title">
                <div class="caption font-green bold">
                    <span class="am-icon-code"></span> 添加接口
                </div>
            </div>

            <!--类型、名称-->
            <div class="form-inline" role="form">
                <div class="form-group">
                    <strong>类型/名称: </strong>
                  </div>
                  <div class="form-group">
                    <select data-am-selected="{btnWidth: '100%',btnSize: 'sm'}">
                         <option value="GET" selected>GET</option>
                         <option value="POST">POST</option>
                    </select>
                  </div>
                  <div class="form-group">
                     <input type="text" class="form-control"  placeholder="请输入接口名称" size="50" maxlength="90">
                      <span style="color: red"></span>
                  </div>
            </div>

            <!--URL地址-->
            <div class="form-group" style="width: 50%">
                  <label >URL地址:</label>
                  <input type="text" class="form-control"  placeholder="请输入URL地址">
                  <span style="color: red"></span>
            </div>

             <!--Body参数名称-->
            <div class="form-group">
                <label >Body参数名称:</label><br/>
                <div class="form-inline">
                     <button type="button" class="btn btn-default" id="addbody">添加Body参数</button>&nbsp;&nbsp;
                     <button type="button" class="btn btn-success" id="addram">批量添加Raw参数</button>
                     <span style="color: red"></span>
                </div>
            </div>

            <!--Header名称-->
            <div class="form-group">
                    <label >Header名称:</label><br>
                     <button type="button" class="btn btn-default" id="addheader">添加Header</button>
                 </div>


            <!--发送、保存-->
            <div class="form-inline" >
                <button  type="button" class="btn btn-primary">发送请求</button>&nbsp;&nbsp;
                <button  type="button" class="btn btn-warning ">保存接口</button>
            </div>

            <h5>预期结果：</h5>
            <!--返回状态码-->
            <div class="form-group" style="margin-top: 10px">
                <span>Response status:</span><br/>
                <code style="font-size: large">200</code>
            </div>

            <!--返回请求头-->
            <div class="form-group" style="width: 50%">
                <span>Response Header:</span>
                <pre  class="am-pre-scrollable ">
                    content-language:zh-CN
                    content-type:text/html;charset=UTF-8
                    date:Thu, 25 Jan 2018 07:08:00 GMT
                    status:200
                    timing-allow-origin:*
                </pre>
            </div>

            <!--返回body-->
            <div class="form-group" style="width: 50%;">
                <span>Response Body:</span>
                <pre  class="am-pre-scrollable" id="result">
                        {
                        "error": 0,
                        "status": "success",
                        "date": "2018-01-01"
                    }
                </pre>
            </div>

        </div>
    </div>

</div>
<script>



    //新增body参数
    $('#addbody').click(function () {
        $(this).parent().append('<div class="form-inline "  style="margin-top: 10px">\n' +
            '  <div class="form-group">\n' +
            '    <input type="text" class="form-control" placeholder="key" size="30">\n' +
            '  </div>\n' +
            '\n' +
            '  <div class="form-group" >\n' +
            '  <input type="text" class="form-control"  placeholder="value" size="51">' +
            '  <input type="button"  class="btn btn-danger rmip" onclick="rmbody(this);" value="移除"/>'+
            '  </div>\n' + '</div>');
    });

    function rmbody (obj) {
        $(obj).parent().parent().remove();
    }

    function rmheader (obj) {
        $(obj).parent().parent().remove();
    }


    //新增header参数
    $('#addheader').click(function () {
        $(this).parent().append('<div class="form-inline" style="margin-top: 10px">\n' +
            '  <div class="form-group">\n' +
            '    <input type="text" class="form-control" placeholder="key" size="30">\n' +
            '  </div>\n' +
            '\n' +
            '  <div class="form-group" >\n' +
            '  <input type="text" class="form-control"  placeholder="value" size="51">' +
            '  <input type="button"  class="btn btn-danger" onclick="rmheader(this);" value="移除"/>'+
            '  </div>\n' + '</div>');
    });


    res='{\n' +
        ' "error": 0,\n' +
        ' "status": "success",\n' +
        ' "date": "2018-01-01"\n' +
        '}'

    $('#result').html(syntaxHighlight(res));

    //高亮显示代码块
    function syntaxHighlight(json) {
    if (typeof json != 'string') {
        json = JSON.stringify(json, undefined, 2);
    }
    json = json.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>');
    return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function(match) {
        var cls = 'number';
        if (/^"/.test(match)) {
            if (/:$/.test(match)) {
                cls = 'key';
            } else {
                cls = 'string';
            }
        } else if (/true|false/.test(match)) {
            cls = 'boolean';
        } else if (/null/.test(match)) {
            cls = 'null';
        }
        return '<span class="' + cls + '">' + match + '</span>';
    });
}


</script>
{%end%}

